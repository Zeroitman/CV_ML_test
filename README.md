Извлечение кадров из видео
1. Закиньте видео которые из которого вы хотите извлечь кадры в папку cv_ml_test/video
2. На 32 строке модуля cv_ml_test/main/extract_frames.py укажите название файла(file_name)
3. Выполните извлечение кадров командой python -m main.extract_frames.
Отмечу, что по умолчанию стоит значение fps=1, т.е. 1 кадр в секунду.
4. Результат будет сохранен в папку cv_ml_test/media/frames/file_name

Аннотировать изображения (bounding boxes + классы)
Необходимо выбрать программу для аннотирования. Я использовал Label Studio.
Ниже команды для развертывания

- pip install poetry
- poetry new my-label-studio
- cd my-label-studio
- poetry add label-studio
- poetry env active # выведет команду для активации, выполнить её

# для подгрузки данных укажите нижеследующие переменные, home/user ваша основная папка
- export LABEL_STUDIO_LOCAL_FILES_SERVING_ENABLED=true
- export LABEL_STUDIO_LOCAL_FILES_DOCUMENT_ROOT=/home/user
### Start the server at http://localhost:8080
label-studio

После этого в бразуере будет открыта программа Label Studio
Далее
5. Зайти и вбить email и password
6. Создать аккаунт
7. Войти под указанными кредами
8. Create Project и вбить наименование и описание(опционально) проекта
9. Для импорта подключите хранилище, перейдите в раздел Settings проекта
10. Cloud Storage → Added source storage → Storage type → Local Files
11. Укажите путь до папки с изображениями из пункта 4. Например. /home/sasha/TestProjects/cv_ml_test/media/frames/2_1.MOV
12. В File Filter Regex укажи какие файлы искать. Например .*jpg
13. Активируй Treat every bucket object as a source file
14. Check connection должен вернуть Successfully connected!
15. Нажать Save → Sync Storage, теперь изображения будут загружены
16. Для присвоения классов необходимо Settings → Labeling Interface → 
Browse Templates → Object Detection with Bounding Boxes
17. Для добавления классов Add label names
18. Далее необходимо размечать изображения для этого необходимо изучить видео 
и определиться с классами
19. Сохраните результаты
20. Экспортируйте только размеченные кадры в формат YOLO with Images, 
можно использовать фильтр Annotated_by
21. Перенеси экспортируемые данные в папку media в проекте
22. На 39 строке модуля cv_ml_test/main/create_dataset.py укажите 
название папки(которая была экспортирована из yolo)
23. Выполните команду python -m main.create_dataset. Будет создан dataset 
и произведено разделение на train/val/test
24. Выполните команду python -m main.albumentation для аугментации данных
25. Проверьте пути папок в dataset.yaml
26. Выполните команду python -m main.learning для обучения


Заключение.
Взял видео 2_1.MOV и разметил все классы блюд все кадры не размечал, периодически пропускал наборы одинаковых кадров
параметры использовал. Для обучения использовал параметры 50 эпох и 320 значений imgsz для максимального быстрого выполнения и получения начального результата
После обучения проверял результат командой model.predict() в итоге желтый суп вообще ни разу не был на видео никак размечен
Попробую разметить больше кадров с желтым супом и дообучать модель увеличив значение imgsz вдвое до 640 что распознать мелкие объекты. 
К сожалению желтый суп все еще не детектится. Поэтому попробую его разметитить в Label Studio более широко и повторю действия. Увеличу албументацию до 10. проходов.
Да это привелу к результату теперь все блюда на видео 2_1 отлично детектятся.
Теперь првоерю как детектятся блюда на 3_1 видео. Заметил что борщ стал после перемешивания часто детектится как желтый суп. Собственно думаю что это произошло потому что я когда размечал борщ не полностью захватывал чашку с борщом, попробую заново аннторировать борщ чтобы было вместо с чашкой.
Значения определения в видео поднялась, теперь борщ всегда борщ, едиственно стал куда хуже определятся класс желтого супа, я думаю из-за значения 320 imgsz, попробую поднять до 640 и обучить модель.
Очень странный результат, почти все блюда перестали определятся. Подниму значение аугментации. Это помогло на из-за того что лаваш лежит на деревянной тарелке цвета стола, он перестал определятся. Поэтому аннотирую только лаваш. Столкнулся с проблемой с очень большим размером dataseta по весу, перешел на использование c png на jpg